<div class="upload">
    <h2>Upload</h2>
    <input type="file" (change)="onFileSelected($event)" accept="image/*">
    <button (click)="onUpload()" [disabled]="!selectedFile">Carica</button>

    @if (uploadMessage) {
    <p>{{ uploadMessage }}</p>
    }
</div>

<mat-divider></mat-divider>

<div class="container">
    <!-- Barra di navigazione -->
    <div class="navigation">
        <button (click)="goBack()" [disabled]="!currentPath">Torna indietro</button>
        <span class="current-path">Percorso corrente: {{ currentPath || 'Dataset-Voli' }}</span>
    </div>

    <!-- Lista di cartelle -->
    <div class="folder-list">
        @for (folder of folders; track folder.path) {
        <div class="folder-item">
            <span class="icon">📁</span>
            <span class="name" (click)="navigateToFolder(folder.path)">
                {{ folder.name }}
            </span>
            <button (click)="downloadFolder(folder.path)">Scarica cartella</button>
        </div>
        }
    </div>

    <!-- Lista di file -->
    <div class="file-list">
        @for (file of files; track file.path) {
        <div class="file-item">
            <span class="icon">📄</span>
            <span class="name">
                {{ file.name }}
            </span>
            <button (click)="downloadFile(file.path)">Scarica file</button>
        </div>
        }
    </div>

    <!-- Sezione per l'upload -->
    <div class="upload-section">
        <input type="file" (change)="onFileSelected($event)" #fileInput />
        <button (click)="fileInput.click()">Scegli file</button>
        <button (click)="onUpload()" [disabled]="!selectedFile">Carica file</button>
    </div>

    <!-- Messaggio di upload -->
    @if (uploadMessage) {
    <div class="upload-message">
        {{ uploadMessage }}
    </div>
    }
</div>